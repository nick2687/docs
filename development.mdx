---
title: Development Guide
description: Guide for contributing to HomeLens Web
---

# Development Guide

This guide covers development setup, coding standards, and contribution guidelines for HomeLens Web.

## Development Setup

### Prerequisites

- Node.js 18+
- npm, yarn, or pnpm
- Firebase project
- Git

### Initial Setup

1. Clone repository
2. Install dependencies: `npm install`
3. Configure environment variables (see [Getting Started](/docs/getting-started))
4. Run development server: `npm run dev`

## Code Structure

### Directory Organization

```
web/
├── app/              # Next.js App Router
├── components/       # React components
├── lib/             # Utilities and configurations
├── types/           # TypeScript definitions
└── public/          # Static assets
```

### Naming Conventions

- **Files**: `kebab-case.tsx` for components, `camelCase.ts` for utilities
- **Components**: `PascalCase` (e.g., `InspectionCard.tsx`)
- **Functions**: `camelCase` (e.g., `getInspections`)
- **Constants**: `UPPER_SNAKE_CASE` (e.g., `MAX_FILE_SIZE`)

### TypeScript

- Use TypeScript for all new code
- Define types in `types/` directory
- Avoid `any` type
- Use proper interfaces for data structures

## Component Guidelines

### React Components

Use functional components with hooks:

```typescript
import { useState } from 'react'

interface Props {
  title: string
}

export function MyComponent({ title }: Props) {
  const [count, setCount] = useState(0)
  
  return (
    <div>
      <h1>{title}</h1>
      <p>Count: {count}</p>
    </div>
  )
}
```

### Component Organization

- One component per file
- Co-locate related components
- Extract reusable logic to hooks

### Styling

Use Tailwind CSS classes:

```typescript
<div className="flex items-center justify-between p-4 bg-white rounded-lg shadow">
  <h2 className="text-xl font-semibold">Title</h2>
</div>
```

## Data Fetching

### Using SWR

For client-side data fetching:

```typescript
import useSWR from 'swr'

function useTemplates() {
  const { data, error, mutate } = useSWR('/api/templates', fetcher)
  return { templates: data, isLoading: !error && !data, error, mutate }
}
```

### Server Components

For server-side data fetching:

```typescript
async function TemplatesPage() {
  const templates = await getTemplates()
  return <TemplatesList templates={templates} />
}
```

## Firebase Integration

### Client-Side

```typescript
import { db } from '@/lib/firebase/config'
import { collection, getDocs } from 'firebase/firestore'

const templatesRef = collection(db, 'templates')
const snapshot = await getDocs(templatesRef)
```

### Server-Side

```typescript
import { adminDb } from '@/lib/firebase/admin'

const snapshot = await adminDb.collection('templates').get()
```

## API Routes

### Structure

```typescript
// app/api/templates/route.ts
import { NextRequest, NextResponse } from 'next/server'

export async function GET(request: NextRequest) {
  try {
    // Get data
    const templates = await getTemplates()
    return NextResponse.json({ templates })
  } catch (error) {
    return NextResponse.json(
      { error: 'Failed to fetch templates' },
      { status: 500 }
    )
  }
}

export async function POST(request: NextRequest) {
  try {
    const body = await request.json()
    const template = await createTemplate(body)
    return NextResponse.json({ template }, { status: 201 })
  } catch (error) {
    return NextResponse.json(
      { error: 'Failed to create template' },
      { status: 500 }
    )
  }
}
```

### Authentication

Verify authentication in API routes:

```typescript
import { getServerSession } from '@/lib/auth'

export async function GET(request: NextRequest) {
  const session = await getServerSession(request)
  if (!session) {
    return NextResponse.json(
      { error: 'Unauthorized' },
      { status: 401 }
    )
  }
  // ... proceed
}
```

## Testing

### Unit Tests

Use Vitest for unit tests:

```typescript
import { describe, it, expect } from 'vitest'
import { calculatePrice } from '@/lib/utils/pricingCalculator'

describe('calculatePrice', () => {
  it('calculates price correctly', () => {
    const price = calculatePrice({ basePrice: 300, taxRate: 0.13 })
    expect(price).toBe(339)
  })
})
```

### E2E Tests

Use Playwright for E2E tests:

```typescript
import { test, expect } from '@playwright/test'

test('user can create inspection', async ({ page }) => {
  await page.goto('/dashboard/inspections/new')
  await page.fill('[name="propertyAddress"]', '123 Main St')
  await page.click('button[type="submit"]')
  await expect(page).toHaveURL(/\/dashboard\/inspections\/\w+/)
})
```

### Running Tests

```bash
# Unit tests
npm test

# E2E tests
npm run test:e2e

# Watch mode
npm run test:watch
```

## Code Quality

### Linting

```bash
npm run lint
```

### Type Checking

```bash
npm run type-check
```

### Formatting

Use Prettier (configured in project):

```bash
npx prettier --write .
```

## Git Workflow

### Branching

- `main`: Production-ready code
- `develop`: Development branch
- `feature/*`: Feature branches
- `fix/*`: Bug fix branches

### Commit Messages

Use conventional commits:

```
feat: add template import functionality
fix: resolve calendar sync issue
docs: update API documentation
refactor: simplify pricing calculation
```

### Pull Requests

1. Create feature branch
2. Make changes
3. Write/update tests
4. Update documentation
5. Create pull request
6. Address review comments

## Best Practices

### Error Handling

Always handle errors:

```typescript
try {
  await createTemplate(data)
} catch (error) {
  console.error('Failed to create template:', error)
  toast.error('Failed to create template')
}
```

### Performance

- Lazy load components when possible
- Optimize images with Next.js Image
- Use React.memo for expensive components
- Debounce search inputs

### Security

- Never expose API keys in client code
- Validate all user input
- Use Firestore security rules
- Sanitize data before storing

### Accessibility

- Use semantic HTML
- Add ARIA labels where needed
- Ensure keyboard navigation
- Test with screen readers

## Related Documentation

- [Getting Started](/docs/getting-started) - Initial setup
- [Architecture](/docs/architecture) - System design
- [API Reference](/docs/api-reference) - API endpoints

